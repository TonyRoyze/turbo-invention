---
import Layout from "../layouts/Layout.astro";

const response = await fetch(
	"https://opensheet.elk.sh/1Wjyj120-bA2ogVDcebhr0PLlLtRhupBe65cjZfgmOf4/1",
);
const data = await response.json();

import type { APIRoute } from "astro";
export const GET: APIRoute = (data) => {
	return new Response(
		JSON.stringify({
			message: "This was a GET!",
		}),
	);
};

// No product found
if (!data) {
	return {
		status: 404,
	};
}
---

<Layout title="Student Scores">
	<main>
		<h1>Student Scores</h1>
		<div class="score-table">
			<div class="table-header">
				<div class="name-col">Name</div>
				<div class="score-col">Score</div>
			</div>
			{
				data.map((item: { Name: string; Score: number }) => (
					<div class="table-row">
						<div class="name-col">{item.Name}</div>
						<div class="score-col">{item.Score}</div>
					</div>
				))
			}
		</div>
	</main>
</Layout>

<style>
	main {
		margin: auto;
		padding: 1rem;
		width: 800px;
		max-width: calc(100% - 2rem);
		color: white;
		font-size: 20px;
		line-height: 1.6;
	}

	h1 {
		text-align: center;
		margin-bottom: 2rem;
	}

	.score-table {
		border-radius: 8px;
		overflow: hidden;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	}

	.table-header {
		display: flex;
		background-color: rgb(136, 58, 234);
		font-weight: bold;
		padding: 1rem;
	}

	.table-row {
		display: flex;
		padding: 0.75rem 1rem;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	}

	.table-row:nth-child(even) {
		background-color: rgba(255, 255, 255, 0.05);
	}

	.name-col {
		flex: 3;
	}

	.score-col {
		flex: 1;
		text-align: center;
	}

	.table-row:hover {
		background-color: rgba(224, 204, 250, 0.2);
		transition: background-color 0.2s ease;
	}
</style>
